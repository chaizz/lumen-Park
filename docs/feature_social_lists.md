# 用户关注/粉丝列表页产品设计文档

## 1. 概述 (Overview)
本功能旨在完善个人中心的社交互动体验。当用户点击个人主页的“关注数”或“粉丝数”时，将进入专门的列表页，查看详细的用户清单，并进行相应的社交操作（关注/取消关注）。

## 2. 页面流程 (User Flow)
1.  **入口**：个人主页 (`/profile/:id`) 顶部的统计数据区。
    *   点击“关注”数字 -> 跳转至“关注列表页”。
    *   点击“粉丝”数字 -> 跳转至“粉丝列表页”。
2.  **列表页**：展示用户卡片列表。
3.  **操作**：
    *   在关注列表中：点击“已关注”按钮 -> 取消关注。
    *   在粉丝列表中：
        *   若未互关 -> 点击“关注”按钮 -> 建立关注。
        *   若已互关 -> 显示“互相关注”或“已关注”状态 -> 可取消关注。

## 3. 界面设计 (UI Design)

### 3.1 页面布局
复用通用的列表布局，顶部为标题栏（带返回按钮），主体为垂直滚动的用户列表。

**标题栏**：
*   左侧：`< 返回`
*   中间：`关注列表` 或 `粉丝列表`

### 3.2 用户卡片 (User Card)
每个列表项为一个横向布局的卡片：
*   **左侧**：用户头像 (Avatar)，点击跳转至该用户主页。
*   **中间**：
    *   第一行：用户名 (Username)，加粗。
    *   第二行：个人简介 (Bio)，单行截断，灰色小字。
*   **右侧**：操作按钮 (Action Button)。

### 3.3 按钮状态逻辑
| 场景 | 当前状态 | 按钮文案 | 按钮样式 | 点击行为 |
| :--- | :--- | :--- | :--- | :--- |
| **关注列表** | 已关注 | `已关注` | 灰色边框/文字 (Secondary) | 弹出确认框 -> 取消关注 |
| **粉丝列表** | 未关注 (单向粉) | `关注` | 主色背景 (Primary Emerald) | 直接关注 |
| **粉丝列表** | 已关注 (互粉) | `互相关注` | 灰色边框/文字 (Secondary) | 弹出确认框 -> 取消关注 |
| **所有列表** | 自己 (当前登录用户) | (隐藏) | - | - |

## 4. 技术实现 (Technical Implementation)

### 4.1 路由 (Frontend Routes)
新增两个路由：
*   `/profile/:id/following`: 关注列表
*   `/profile/:id/followers`: 粉丝列表

### 4.2 后端接口 (Backend API)
需要新增或确认以下接口：

1.  **获取关注列表**: `GET /api/v1/users/{user_id}/following`
    *   Response: `List[User]` (包含 `is_following` 状态字段，用于判断是否已关注该用户)
2.  **获取粉丝列表**: `GET /api/v1/users/{user_id}/followers`
    *   Response: `List[User]` (同样需要 `is_following` 状态)

*注：现有的 User 模型可能需要动态注入 `is_following` 字段，或者前端通过额外逻辑判断。鉴于性能，建议后端在查询时直接关联当前登录用户的关注状态。*

### 4.3 数据结构调整
在 `UserResponse` 中增加 `is_following` (boolean) 字段，仅在列表查询且有登录用户时返回有效值。

## 5. 开发计划
1.  **后端**：
    *   实现 `get_followers` 和 `get_following` 的 Service 逻辑。
    *   在 Router 中添加对应端点。
    *   确保返回的用户对象中包含当前登录用户对其的关注状态。
2.  **前端**：
    *   创建 `UserList.vue` 通用组件。
    *   配置路由。
    *   对接 API 并实现按钮交互逻辑。
